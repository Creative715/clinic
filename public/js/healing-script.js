const lazyImages=document.querySelectorAll("img[data-src]"),windowHeight=document.documentElement.clientHeight,loadMoreBlock=document.querySelectorAll("_load-more");let lazyImagesPositions=[];function lazyScroll(){document.querySelectorAll("img[data-src]").length>0&&lazyScrollChek()}function lazyScrollChek(){let imgIndex=lazyImagesPositions.findIndex(item=>pageYOffset>item-windowHeight);imgIndex>=0&&(lazyImages[imgIndex].dataset.src&&(lazyImages[imgIndex].src=lazyImages[imgIndex].dataset.src,lazyImages[imgIndex].removeAttribute("data-src")),delete lazyImagesPositions[imgIndex])}function loadMore(){loadMoreBlockPos=loadMoreBlock.getBoundingClientRect().top+pageYOffset,loadMoreBlockHeight=loadMoreBlock.offsetHeight,pageYOffset>loadMoreBlockPos+loadMoreBlockHeight-windowHeight&&getContent()}async function getContent(){}lazyImages.length>0&&lazyImages.forEach(img=>{img.dataset.src&&lazyImagesPositions.push(img.getBoundingClientRect().top+pageYOffset)}),window.addEventListener("scroll",lazyScroll);
